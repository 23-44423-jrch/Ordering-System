<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Heavenly Sweet Cakes - Cake Ordering System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            /* Light-brown / warm neutral palette */
            --primary: #D2B48C; /* tan */
            --secondary: #EDE0C8; /* light cream */
            --accent: #A67C52; /* warm brown accent */
            --dark: #4B2E2A; /* dark brown for text */
            --light: #FBF7F2; /* very light warm background */
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        body {
            background-color: #fff9f9;
            color: var(--dark);
            line-height: 1.6;
        }

        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }

        /* Login Page Styles */
        .login-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('https://images.unsplash.com/photo-1578985545062-69928b1d9587?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1089&q=80');
            background-size: cover;
            background-position: center;
            padding: 20px;
            position: relative;
            overflow: hidden;
        }

        /* Floating Bubbles Animation */
        .bubble {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            animation: float 15s infinite ease-in-out;
            z-index: 0;
        }

        .bubble:nth-child(1) {
            width: 80px;
            height: 80px;
            top: 10%;
            left: 10%;
            animation-delay: 0s;
        }

        .bubble:nth-child(2) {
            width: 60px;
            height: 60px;
            top: 20%;
            right: 15%;
            animation-delay: 2s;
        }

        .bubble:nth-child(3) {
            width: 100px;
            height: 100px;
            bottom: 15%;
            left: 20%;
            animation-delay: 4s;
        }

        .bubble:nth-child(4) {
            width: 70px;
            height: 70px;
            bottom: 25%;
            right: 10%;
            animation-delay: 6s;
        }

        .bubble:nth-child(5) {
            width: 90px;
            height: 90px;
            top: 40%;
            left: 5%;
            animation-delay: 8s;
        }

        .bubble:nth-child(6) {
            width: 50px;
            height: 50px;
            top: 60%;
            right: 5%;
            animation-delay: 10s;
        }

        .login-box {
            background: white;
            border-radius: 10px;
            width: 100%;
            max-width: 400px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            animation: slideUp 0.5s ease;
            position: relative;
            z-index: 1;
        }

        .login-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .login-header .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .login-header .logo img {
            height: 60px;
            width: auto;
            border-radius: 10px;
        }

        .login-header h1 {
            color: var(--primary);
            font-size: 2rem;
        }

        .login-header p {
            color: #666;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
            transition: var(--transition);
        }

        .form-group input:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 2px rgba(166, 124, 82, 0.12); /* warm brown focus */
        }

        .login-btn {
            width: 100%;
            padding: 12px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            margin-bottom: 15px;
        }

        .login-btn:hover {
            background: #b57a4a; /* darker warm brown */
            transform: translateY(-2px);
        }

        .toggle-form {
            text-align: center;
            margin-top: 20px;
        }

        .toggle-form a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
        }

        .toggle-form a:hover {
            text-decoration: underline;
        }

        .user-type-selector {
            display: flex;
            margin-bottom: 20px;
            border-radius: 5px;
            overflow: hidden;
            border: 1px solid #ddd;
        }

        .user-type {
            flex: 1;
            text-align: center;
            padding: 10px;
            background: #f5f5f5;
            cursor: pointer;
            transition: var(--transition);
        }

        .user-type.active {
            background: var(--primary);
            color: white;
        }

        /* Main App Styles (Hidden Initially) */
        .app {
            display: none;
        }

        /* Header Styles */
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 1rem 0;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            animation: bounce 2s infinite;
        }

        .logo img {
            height: 50px;
            width: auto;
            border-radius: 8px;
        }

        .logo h1 {
            font-size: 1.8rem;
            font-weight: 700;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 20px;
        }

        nav a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            padding: 5px 10px;
            border-radius: 20px;
            transition: var(--transition);
        }

        nav a:hover, nav a.active {
            background-color: rgba(255, 255, 255, 0.2);
        }

        .user-actions {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
        }

        .btn-primary {
            background-color: var(--accent);
            color: white;
        }

        .btn-primary:hover {
            background-color: #8f6a43; /* darker accent */
            transform: translateY(-2px);
        }

        .btn-secondary {
            background-color: transparent;
            color: white;
            border: 2px solid white;
        }

        .btn-secondary:hover {
            background-color: white;
            color: var(--primary);
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('https://images.unsplash.com/photo-1578985545062-69928b1d9587?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1089&q=80');
            background-size: cover;
            background-position: center;
            color: white;
            padding: 5rem 0;
            text-align: center;
            animation: fadeIn 1.5s ease;
        }

        .hero h2 {
            font-size: 3rem;
            margin-bottom: 1rem;
            animation: slideInFromTop 1s ease;
        }

        .hero p {
            font-size: 1.2rem;
            max-width: 600px;
            margin: 0 auto 2rem;
            animation: slideInFromBottom 1s ease;
        }

        /* Section Styles */
        section {
            padding: 4rem 0;
        }

        .section-title {
            text-align: center;
            margin-bottom: 3rem;
            position: relative;
        }

        .section-title h2 {
            font-size: 2.5rem;
            color: var(--primary);
            display: inline-block;
        }

        .section-title h2::after {
            content: '';
            display: block;
            width: 80px;
            height: 4px;
            background: var(--secondary);
            margin: 10px auto;
            border-radius: 2px;
        }

        /* Menu Section */
        .menu-filters {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 8px 20px;
            background: white;
            border: 2px solid var(--primary);
            border-radius: 25px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }

        .filter-btn.active, .filter-btn:hover {
            background: var(--primary);
            color: white;
        }

        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 30px;
        }

        .menu-item {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
            animation: fadeInUp 0.8s ease;
        }

        .menu-item:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
        }

        .menu-item img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .item-info {
            padding: 20px;
        }

        .item-info h3 {
            font-size: 1.3rem;
            margin-bottom: 10px;
            color: var(--dark);
        }

        .item-info p {
            color: #666;
            margin-bottom: 15px;
            font-size: 0.9rem;
        }

        .item-price {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .price {
            font-weight: 700;
            color: var(--primary);
            font-size: 1.2rem;
        }

        .add-to-cart {
            background: var(--primary);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .add-to-cart:hover {
            background: var(--accent);
            transform: scale(1.1);
        }

        /* Cart Section */
        .cart-container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: var(--shadow);
            max-width: 800px;
            margin: 0 auto;
            animation: fadeIn 0.8s ease;
        }

        .cart-items {
            margin-bottom: 20px;
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #eee;
        }

        .cart-item:last-child {
            border-bottom: none;
        }

        .item-details {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .item-details img {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 8px;
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .quantity-btn {
            background: var(--light);
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .quantity-btn:hover {
            background: var(--accent);
            color: white;
        }

        .cart-summary {
            border-top: 2px solid #eee;
            padding-top: 20px;
            text-align: right;
        }

        .cart-summary h3 {
            margin-bottom: 10px;
            font-size: 1.5rem;
        }

        .checkout-btn {
            background: var(--accent);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 30px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            margin-top: 15px;
        }

        .checkout-btn:hover {
            background: #8f6a43; /* match btn-primary hover */
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        /* About Section */
        .about-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            align-items: center;
        }

        .about-text h3 {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: var(--primary);
        }

        .about-text p {
            margin-bottom: 15px;
        }

        .about-image img {
            width: 100%;
            border-radius: 10px;
            box-shadow: var(--shadow);
            animation: float 3s ease-in-out infinite;
        }

        /* Dashboard Styles */
        .dashboard {
            display: none;
        }

        .dashboard-header {
            background: var(--primary);
            color: white;
            padding: 1rem 0;
            margin-bottom: 2rem;
        }

        .dashboard-nav {
            display: flex;
            gap: 20px;
            margin-top: 15px;
        }

        .dashboard-nav a {
            color: white;
            text-decoration: none;
            padding: 8px 15px;
            border-radius: 20px;
            transition: var(--transition);
        }

        .dashboard-nav a.active {
            background: rgba(255, 255, 255, 0.2);
        }

        .dashboard-content {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: var(--shadow);
        }

        .order-list, .user-list, .menu-list {
            margin-top: 20px;
        }

        .order-item, .user-item, .menu-item-admin {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid #eee;
            transition: var(--transition);
        }

        .order-item:hover, .user-item:hover, .menu-item-admin:hover {
            background: #f9f9f9;
        }

        .status-select {
            padding: 5px 10px;
            border-radius: 5px;
            border: 1px solid #ddd;
        }

        .status-pending {
            background: #fff3cd;
            color: #856404;
            padding: 5px 10px;
            border-radius: 5px;
        }

        .status-preparing {
            background: #cce7ff;
            color: #004085;
            padding: 5px 10px;
            border-radius: 5px;
        }

        .status-ready {
            background: #d4edda;
            color: #155724;
            padding: 5px 10px;
            border-radius: 5px;
        }

        .status-completed {
            background: #d1ecf1;
            color: #0c5460;
            padding: 5px 10px;
            border-radius: 5px;
        }

        /* Image Upload Section */
        .image-upload {
            margin-top: 20px;
            padding: 20px;
            background: #f9f9f9;
            border-radius: 10px;
        }

        .image-upload h3 {
            margin-bottom: 15px;
            color: var(--primary);
        }

        .upload-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .upload-controls input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .upload-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: var(--transition);
        }

        .upload-btn:hover {
            background: #b57a4a; /* match login hover */
        }

        .image-preview {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .preview-item {
            position: relative;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        .preview-item img {
            width: 100%;
            height: 120px;
            object-fit: cover;
        }

        .preview-item .remove-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(255, 0, 0, 0.7);
            color: white;
            border: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            background: white;
            border-radius: 10px;
            width: 90%;
            max-width: 500px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            animation: slideUp 0.5s ease;
            position: relative;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-header h2 {
            color: var(--primary);
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
        }

        /* Footer */
        footer {
            background: var(--dark);
            color: white;
            padding: 3rem 0 1rem;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-bottom: 2rem;
        }

        .footer-section h3 {
            font-size: 1.3rem;
            margin-bottom: 20px;
            color: var(--secondary);
        }

        .footer-section p, .footer-section a {
            color: #bbb;
            margin-bottom: 10px;
            display: block;
            text-decoration: none;
            transition: var(--transition);
        }

        .footer-section a:hover {
            color: var(--secondary);
        }

        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 15px;
        }

        .social-links a {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background: #444;
            border-radius: 50%;
            transition: var(--transition);
        }

        .social-links a:hover {
            background: var(--primary);
            transform: translateY(-3px);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid #444;
            color: #bbb;
            font-size: 0.9rem;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideInFromTop {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes slideInFromBottom {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes fadeInUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) translateX(0); }
            50% { transform: translateY(-20px) translateX(10px); }
        }

        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--accent);
            color: white;
            padding: 15px 25px;
            border-radius: 5px;
            box-shadow: var(--shadow);
            z-index: 3000;
            animation: slideInFromRight 0.5s ease, fadeOut 0.5s ease 2.5s forwards;
        }

        @keyframes slideInFromRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }

        /* Responsive Styles */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }

            nav ul {
                flex-wrap: wrap;
                justify-content: center;
            }

            .hero h2 {
                font-size: 2.2rem;
            }

            .about-content {
                grid-template-columns: 1fr;
            }

            .menu-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }

            .cart-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .item-details {
                width: 100%;
            }

            .quantity-controls {
                align-self: flex-end;
            }
        }
    </style>
</head>
<body>
    <!-- Login/Register Page -->
    <div class="login-container" id="loginPage">
        <!-- Floating Bubbles -->
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        
        <div class="login-box">
            <div class="login-header">
                <div class="logo">
                    <img src="https://i.pinimg.com/736x/e7/5f/fb/e75ffb1f384d7bb78f06341e04121ec2.jpg" alt="Heavenly Sweet Cakes Logo">
                    <h1>Heavenly Sweet Cakes</h1>
                </div>
                <p>Please login to access our cake ordering system</p>
            </div>
            
            <div class="user-type-selector">
                <div class="user-type active" data-type="customer">Customer</div>
                <div class="user-type" data-type="staff">Staff</div>
                <div class="user-type" data-type="admin">Admin</div>
            </div>
            
            <form id="loginForm">
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" required>
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" required>
                </div>
                <button type="submit" class="login-btn">Login</button>
            </form>
            
            <!-- Demo accounts quick-fill -->
            <div id="demoAccounts" style="margin-top:16px; border-top:1px dashed #eee; padding-top:12px; text-align:left;">
                <p style="margin:0 0 8px 0; font-size:0.95rem; color:#444;"><strong>Demo accounts:</strong> click to autofill</p>
                <div style="display:flex; gap:8px; flex-wrap:wrap;">
                    <button class="btn btn-secondary demo-account-btn" data-email="john@example.com" data-password="password123" data-type="customer">Customer</button>
                    <button class="btn btn-secondary demo-account-btn" data-email="jane@example.com" data-password="password123" data-type="staff">Staff</button>
                    <button class="btn btn-secondary demo-account-btn" data-email="admin@example.com" data-password="admin123" data-type="admin">Admin</button>
                </div>
            </div>
            
            <form id="registerForm" style="display: none;">
                <div class="form-group">
                    <label for="regName">Full Name</label>
                    <input type="text" id="regName" required>
                </div>
                <div class="form-group">
                    <label for="regEmail">Email</label>
                    <input type="email" id="regEmail" required>
                </div>
                <div class="form-group">
                    <label for="regPassword">Password</label>
                    <input type="password" id="regPassword" required>
                </div>
                <div class="form-group">
                    <label for="regConfirmPassword">Confirm Password</label>
                    <input type="password" id="regConfirmPassword" required>
                </div>
                <div class="form-group">
                    <label for="regType">Account Type</label>
                    <select id="regType" required>
                        <option value="customer">Customer</option>
                        <option value="staff">Staff</option>
                    </select>
                </div>
                <button type="submit" class="login-btn">Register</button>
            </form>
            
            <div class="toggle-form">
                <a href="#" id="toggleFormLink">Don't have an account? Register here</a>
            </div>
        </div>
    </div>

    <!-- Main Application (Hidden Initially) -->
    <div class="app" id="app">
        <!-- Header -->
        <header>
            <div class="container header-content">
                <div class="logo">
                    <img src="https://i.pinimg.com/736x/e7/5f/fb/e75ffb1f384d7bb78f06341e04121ec2.jpg" alt="Heavenly Sweet Cakes Logo">
                    <h1>Heavenly Sweet Cakes</h1>
                </div>
                <nav>
                    <ul>
                        <li><a href="#home" class="active">Home</a></li>
                        <li><a href="#menu">Menu</a></li>
                        <li><a href="#about">About</a></li>
                        <li><a href="#contact">Contact</a></li>
                    </ul>
                </nav>
                <div class="user-actions">
                    <span id="userWelcome">Welcome, User!</span>
                    <button class="btn btn-secondary" id="logoutBtn">Logout</button>
                    <button class="btn btn-primary" id="viewCartBtn">
                        <i class="fas fa-shopping-cart"></i> Cart (<span id="cartCount">0</span>)
                    </button>
                </div>
            </div>
        </header>

        <!-- Hero Section -->
        <section class="hero" id="home">
            <div class="container">
                <h2>Delicious Cakes for Every Occasion</h2>
                <p>From birthdays to weddings, we create custom cakes that taste as good as they look. Order online and have your cake delivered fresh to your door.</p>
                <button class="btn btn-primary" id="orderNowBtn">Order Now</button>
            </div>
        </section>

        <!-- Checkout Modal -->
        <div class="modal" id="checkoutModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Checkout</h2>
                    <button class="close-modal" id="closeCheckoutModal">&times;</button>
                </div>
                <form id="checkoutForm">
                    <div class="form-group">
                        <label for="checkoutFullName">Full Name</label>
                        <input type="text" id="checkoutFullName" required>
                    </div>
                    <div class="form-group">
                        <label for="checkoutAddress">Address</label>
                        <input type="text" id="checkoutAddress" required>
                    </div>
                    <div class="form-group">
                        <label for="checkoutZip">ZIP Code</label>
                        <input type="text" id="checkoutZip" required>
                    </div>
                    <div class="form-group">
                        <label>Payment Method</label>
                        <div style="display:flex; gap:10px; align-items:center;">
                            <label><input type="radio" name="paymentMethod" value="gcash" checked> GCash</label>
                            <label><input type="radio" name="paymentMethod" value="credit"> Credit Card</label>
                            <label><input type="radio" name="paymentMethod" value="cod"> Cash on Delivery</label>
                        </div>
                    </div>
                    <div class="form-group" id="gcashFields">
                        <label for="gcashNumber">GCash Number / Reference</label>
                        <input type="text" id="gcashNumber">
                    </div>
                    <div class="form-group" id="creditFields" style="display:none;">
                        <label for="cardNumber">Card Number</label>
                        <input type="text" id="cardNumber" maxlength="19" placeholder="1234 5678 9012 3456">
                        <div style="display:flex; gap:8px; margin-top:10px;">
                            <div style="flex:1">
                                <label for="cardExpiry">Expiry (MM/YY)</label>
                                <input type="text" id="cardExpiry" placeholder="MM/YY">
                            </div>
                            <div style="width:100px">
                                <label for="cardCvv">CVV</label>
                                <input type="text" id="cardCvv" maxlength="4" placeholder="123">
                            </div>
                        </div>
                    </div>
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-top:6px;">
                        <div>Shipping fee:</div>
                        <div><strong>₱<span id="shippingFee">0.00</span></strong></div>
                    </div>
                    <div style="display:flex; justify-content:space-between; align-items:center;">
                        <div>Order total (incl. shipping):</div>
                        <div><strong>₱<span id="orderTotalWithShipping">0.00</span></strong></div>
                    </div>
                    <div style="display:flex; gap:8px; justify-content:flex-end; margin-top:20px;">
                        <button type="button" class="btn btn-secondary" id="cancelCheckout">Cancel</button>
                        <button type="submit" class="btn btn-primary">Complete Order</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Menu Section -->
        <section id="menu">
            <div class="container">
                <div class="section-title">
                    <h2>Our Cake Menu</h2>
                </div>
                <div class="menu-filters">
                    <button class="filter-btn active" data-filter="all">All Cakes</button>
                    <button class="filter-btn" data-filter="birthday">Birthday</button>
                    <button class="filter-btn" data-filter="wedding">Wedding</button>
                    <button class="filter-btn" data-filter="special">Special Occasions</button>
                </div>
                <div class="menu-grid" id="menuGrid">
                    <!-- Menu items will be populated by JavaScript -->
                </div>
            </div>
        </section>

        <!-- Cart Section -->
        <section id="cart" style="display: none;">
            <div class="container">
                <div class="section-title">
                    <h2>Your Cart</h2>
                </div>
                <div class="cart-container">
                    <div class="cart-items" id="cartItems">
                        <!-- Cart items will be populated by JavaScript -->
                    </div>
                    <div class="cart-summary">
                        <h3>Total: ₱<span id="cartTotal">0.00</span></h3>
                        <button class="checkout-btn" id="checkoutBtn">Proceed to Checkout</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section id="about">
            <div class="container">
                <div class="section-title">
                    <h2>About Us</h2>
                </div>
                <div class="about-content">
                    <div class="about-text">
                        <h3>Our Vision & Mission</h3>
                        <p><strong>Vision:</strong> To be the most beloved cake bakery, creating sweet memories one cake at a time.</p>
                        <p><strong>Mission:</strong> We craft exceptional cakes using the finest ingredients, combining traditional recipes with innovative designs to celebrate life's special moments.</p>
                        <p>Founded in 2025, Heavenly Sweet Cakes has been serving the community with delicious, custom-made cakes for all occasions. Our team of skilled bakers and decorators work tirelessly to bring your cake dreams to life.</p>
                        <p>We believe that every celebration deserves a perfect cake, and we're committed to making that happen for you.</p>
                    </div>
                    <div class="about-image">
                        <img id="aboutImage" src="https://images.unsplash.com/photo-1563729784474-d77dbb933a9e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=687&q=80" alt="Our bakery">
                    </div>
                </div>
            </div>
        </section>

        <!-- Customer Dashboard -->
        <section class="dashboard" id="customerDashboard">
            <div class="dashboard-header">
                <div class="container">
                    <h2>Customer Dashboard</h2>
                    <div class="dashboard-nav">
                        <a href="#orderHistory" class="active">Order History</a>
                        <a href="#trackOrder">Track Order</a>
                        <a href="#profile">Profile</a>
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="dashboard-content">
                    <h3>Your Order History</h3>
                    <div class="order-list" id="customerOrders">
                        <!-- Customer orders will be populated by JavaScript -->
                    </div>
                    <!-- Track Order panel -->
                    <div id="trackOrder" style="display:none; margin-top:20px;">
                        <h3>Track Your Order</h3>
                        <p>Enter your order number to see current status and delivery details.</p>
                        <div style="display:flex; gap:8px; max-width:480px; margin-bottom:12px;">
                            <input type="text" id="trackOrderInput" placeholder="Order # e.g. 1001" style="flex:1; padding:8px;">
                            <button class="btn btn-primary" id="trackOrderBtn">Track</button>
                        </div>
                        <div id="trackResult"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Staff Dashboard -->
        <section class="dashboard" id="staffDashboard">
            <div class="dashboard-header">
                <div class="container">
                    <h2>Staff Dashboard</h2>
                    <div class="dashboard-nav">
                        <a href="#viewOrders" class="active">View Orders</a>
                        <a href="#updateStatus">Update Status</a>
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="dashboard-content">
                    <h3>Current Orders</h3>
                    <div class="order-list" id="staffOrders">
                        <!-- Staff orders will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Admin Dashboard -->
        <section class="dashboard" id="adminDashboard">
            <div class="dashboard-header">
                <div class="container">
                    <h2>Admin Dashboard</h2>
                    <div class="dashboard-nav">
                        <a href="#manageMenu" class="active">Manage Menu</a>
                        <a href="#manageUsers">Manage Users</a>
                        <a href="#manageImages">Manage Images</a>
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="dashboard-content">
                    <h3>Menu Items</h3>
                    <button class="btn btn-primary" id="addMenuItemBtn">Add New Item</button>
                    <div class="menu-list" id="adminMenu">
                        <!-- Admin menu items will be populated by JavaScript -->
                    </div>
                    
                    <div class="image-upload" id="imageUploadSection">
                        <h3>Manage Product Images</h3>
                        <div class="upload-controls">
                            <input type="text" id="imageUrl" placeholder="Enter image URL">
                            <button class="upload-btn" id="uploadImageBtn">Add Image</button>
                        </div>
                        <div class="image-preview" id="imagePreview">
                            <!-- Image previews will be populated by JavaScript -->
                        </div>
                    </div>
                    
                    <div class="user-management" id="userManagement" style="margin-top: 30px;">
                        <h3>User Management</h3>
                        <div class="user-list" id="userList">
                            <!-- User list will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer id="contact">
            <div class="container">
                <div class="footer-content">
                    <div class="footer-section">
                        <h3>Heavenly Sweet Cakes</h3>
                        <p>Creating delicious cakes for all your special occasions since 2025.</p>
                        <div class="social-links">
                            <a href="#"><i class="fab fa-facebook-f"></i></a>
                            <a href="#"><i class="fab fa-instagram"></i></a>
                            <a href="#"><i class="fab fa-twitter"></i></a>
                            <a href="#"><i class="fab fa-pinterest"></i></a>
                        </div>
                    </div>
                    <div class="footer-section">
                        <h3>Contact Us</h3>
                        <p><i class="fas fa-map-marker-alt"></i> 006, Talaga Proper, Mabini, Batangas</p>
                        <p><i class="fas fa-phone"></i> +63 998 7654 321</p>
                        <p><i class="fas fa-envelope"></i> heavenlysweetcakes@gmail.com</p>
                    </div>
                    <div class="footer-section">
                        <h3>Quick Links</h3>
                        <a href="#home">Home</a>
                        <a href="#menu">Menu</a>
                        <a href="#about">About Us</a>
                        <a href="#contact">Contact</a>
                    </div>
                    <div class="footer-section">
                        <h3>Opening Hours</h3>
                        <p>Monday - Friday: 8am - 8pm</p>
                        <p>Saturday: 9am - 6pm</p>
                        <p>Sunday: 10am - 4pm</p>
                    </div>
                </div>
                <div class="footer-bottom">
                    <p>&copy; 2025 Heavenly Sweet Cakes. All rights reserved.</p>
                </div>
            </div>
        </footer>
    </div>

    <script>
        // Sample data for cakes
        let cakes = [
            { id: 1, name: "Chocolate Fudge Cake", category: "birthday", price: 899.75, image: "https://images.unsplash.com/photo-1578985545062-69928b1d9587?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1089&q=80", description: "Rich chocolate cake with fudge frosting" },
            { id: 2, name: "Vanilla Dream Cake", category: "birthday", price: 1500, image: "https://images.unsplash.com/photo-1559620192-032c4bc4674e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1029&q=80", description: "Classic vanilla cake with buttercream" },
            { id: 3, name: "Red Velvet Cake", category: "special", price: 999.75, image: "https://images.unsplash.com/photo-1586788680434-30d324b2d46f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1171&q=80", description: "Moist red velvet with cream cheese frosting" },
            { id: 4, name: "Wedding Cake Classic", category: "wedding", price: 750, image: "https://images.unsplash.com/photo-1535254973040-607b474cb50d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80", description: "Elegant multi-tier wedding cake" },
            { id: 5, name: "Strawberry Shortcake", category: "special", price: 1750, image: "https://images.unsplash.com/photo-1565958011703-44f9829ba187?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1065&q=80", description: "Light sponge cake with fresh strawberries" },
            { id: 6, name: "Carrot Cake", category: "special", price: 500, image: "https://i.pinimg.com/1200x/25/7d/b4/257db4ada39863733d82fb57e6169492.jpg", description: "Spiced carrot cake with cream cheese frosting" }
        ];

        // Sample data for orders (will be overridden by localStorage if present)
        let orders = [
            { id: 1001, customer: "John Doe", items: ["Chocolate Fudge Cake", "Vanilla Dream Cake"], total: 67.00, status: "pending", date: "2023-06-15" },
            { id: 1002, customer: "Jane Smith", items: ["Red Velvet Cake"], total: 38.00, status: "preparing", date: "2023-06-16" },
            { id: 1003, customer: "Mike Johnson", items: ["Wedding Cake Classic"], total: 250.00, status: "ready", date: "2023-06-17" },
            { id: 1004, customer: "Sarah Williams", items: ["Strawberry Shortcake", "Carrot Cake"], total: 62.00, status: "completed", date: "2023-06-14" }
        ];

        // Orders persistence helpers
        const ORDERS_KEY = 'orders';

        function saveOrdersToStorage() {
            try {
                localStorage.setItem(ORDERS_KEY, JSON.stringify(orders));
            } catch (err) {
                console.error('Failed to save orders to localStorage', err);
            }
        }

        function loadOrdersFromStorage() {
            try {
                const raw = localStorage.getItem(ORDERS_KEY);
                if (raw) {
                    const parsed = JSON.parse(raw);
                    if (Array.isArray(parsed)) {
                        orders = parsed;
                    }
                } else {
                    // initialize storage with sample orders
                    saveOrdersToStorage();
                }
            } catch (err) {
                console.error('Failed to load orders from localStorage', err);
            }
        }

        // Load persisted orders (if any) on startup
        loadOrdersFromStorage();

        // User data
        let users = [
            { id: 1, name: "John Doe", email: "john@example.com", password: "password123", type: "customer" },
            { id: 2, name: "Jane Smith", email: "jane@example.com", password: "password123", type: "staff" },
            { id: 3, name: "Admin User", email: "admin@example.com", password: "admin123", type: "admin" }
        ];

        // Product images for about section
        let productImages = [
            "https://images.unsplash.com/photo-1563729784474-d77dbb933a9e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=687&q=80",
            "https://images.unsplash.com/photo-1571115764595-644a1f56a55c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=763&q=80",
            "https://images.unsplash.com/photo-1555507036-ab794f27d2e9?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80"
        ];

        // Cart functionality
        let cart = [];
        let currentUser = null;
        let userType = null;
        let isLoginForm = true;

        // DOM Elements
        const loginPage = document.getElementById('loginPage');
        const app = document.getElementById('app');
        const menuGrid = document.getElementById('menuGrid');
        const cartItems = document.getElementById('cartItems');
        const cartCount = document.getElementById('cartCount');
        const cartTotal = document.getElementById('cartTotal');
        const viewCartBtn = document.getElementById('viewCartBtn');
        const checkoutBtn = document.getElementById('checkoutBtn');
        const loginForm = document.getElementById('loginForm');
        const registerForm = document.getElementById('registerForm');
        const toggleFormLink = document.getElementById('toggleFormLink');
        const userTypes = document.querySelectorAll('.user-type');
        const customerDashboard = document.getElementById('customerDashboard');
        const staffDashboard = document.getElementById('staffDashboard');
        const adminDashboard = document.getElementById('adminDashboard');
        const customerOrders = document.getElementById('customerOrders');
        const staffOrders = document.getElementById('staffOrders');
        const adminMenu = document.getElementById('adminMenu');
        const filterBtns = document.querySelectorAll('.filter-btn');
        const menuSection = document.getElementById('menu');
        const cartSection = document.getElementById('cart');
        const orderNowBtn = document.getElementById('orderNowBtn');
    const headerNav = document.querySelector('header nav');
        // Checkout modal elements
        const checkoutModal = document.getElementById('checkoutModal');
        const closeCheckoutModal = document.getElementById('closeCheckoutModal');
        const checkoutForm = document.getElementById('checkoutForm');
        const checkoutFullName = document.getElementById('checkoutFullName');
        const checkoutAddress = document.getElementById('checkoutAddress');
        const checkoutZip = document.getElementById('checkoutZip');
        const gcashFields = document.getElementById('gcashFields');
        const creditFields = document.getElementById('creditFields');
        const gcashNumber = document.getElementById('gcashNumber');
        const cardNumber = document.getElementById('cardNumber');
        const cardExpiry = document.getElementById('cardExpiry');
        const cardCvv = document.getElementById('cardCvv');
        const shippingFeeEl = document.getElementById('shippingFee');
        const orderTotalWithShippingEl = document.getElementById('orderTotalWithShipping');
        const cancelCheckout = document.getElementById('cancelCheckout');
        // Public site sections that should be hidden for staff users
        const publicSections = [document.getElementById('home'), menuSection, document.getElementById('about')];
        // User management elements
        const userList = document.getElementById('userList');

        // Demo account buttons (autofill login)
        const demoAccountButtons = document.querySelectorAll('.demo-account-btn');
        if (demoAccountButtons && demoAccountButtons.length) {
            demoAccountButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    const emailVal = btn.getAttribute('data-email');
                    const pwdVal = btn.getAttribute('data-password');
                    const typeVal = btn.getAttribute('data-type');

                    const emailInput = document.getElementById('email');
                    const passwordInput = document.getElementById('password');
                    if (emailInput) emailInput.value = emailVal || '';
                    if (passwordInput) passwordInput.value = pwdVal || '';

                    // set active user type visually
                    userTypes.forEach(t => {
                        if (t.getAttribute('data-type') === typeVal) {
                            t.classList.add('active');
                        } else {
                            t.classList.remove('active');
                        }
                    });

                    // focus login button for convenience
                    const loginBtn = document.querySelector('#loginForm .login-btn');
                    if (loginBtn) loginBtn.focus();
                });
            });
        }
        const addMenuItemBtn = document.getElementById('addMenuItemBtn');
        const logoutBtn = document.getElementById('logoutBtn');
        const userWelcome = document.getElementById('userWelcome');
        const aboutImage = document.getElementById('aboutImage');
        const imageUploadSection = document.getElementById('imageUploadSection');
        const imageUrl = document.getElementById('imageUrl');
        const uploadImageBtn = document.getElementById('uploadImageBtn');
        const imagePreview = document.getElementById('imagePreview');

        // Initialize the application
        function init() {
            renderMenu();
            setupEventListeners();
            updateCartUI();
            renderImagePreview();
        }

        // Render menu items
        function renderMenu(filter = 'all') {
            menuGrid.innerHTML = '';
            
            const filteredCakes = filter === 'all' 
                ? cakes 
                : cakes.filter(cake => cake.category === filter);
            
            filteredCakes.forEach(cake => {
                const menuItem = document.createElement('div');
                menuItem.className = 'menu-item';
                menuItem.innerHTML = `
                    <img src="${cake.image}" alt="${cake.name}">
                    <div class="item-info">
                        <h3>${cake.name}</h3>
                        <p>${cake.description}</p>
                        <div class="item-price">
                            <span class="price">₱${cake.price.toFixed(2)}</span>
                            <button class="add-to-cart" data-id="${cake.id}">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                    </div>
                `;
                menuGrid.appendChild(menuItem);
            });
            
            // Add event listeners to add-to-cart buttons
            document.querySelectorAll('.add-to-cart').forEach(button => {
                button.addEventListener('click', (e) => {
                    const cakeId = parseInt(e.currentTarget.getAttribute('data-id'));
                    addToCart(cakeId);
                    showToast(`${cakes.find(cake => cake.id === cakeId).name} added to cart!`);
                });
            });
        }

        // Add item to cart
        function addToCart(cakeId) {
            const cake = cakes.find(c => c.id === cakeId);
            const existingItem = cart.find(item => item.id === cakeId);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({
                    id: cake.id,
                    name: cake.name,
                    price: cake.price,
                    image: cake.image,
                    quantity: 1
                });
            }
            
            updateCartUI();
        }

        // Update cart UI
        function updateCartUI() {
            cartCount.textContent = cart.reduce((total, item) => total + item.quantity, 0);
            
            cartItems.innerHTML = '';
            let total = 0;
            
            cart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;
                
                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item';
                cartItem.innerHTML = `
                    <div class="item-details">
                        <img src="${item.image}" alt="${item.name}">
                        <div>
                            <h4>${item.name}</h4>
                            <p>₱${item.price.toFixed(2)}</p>
                        </div>
                    </div>
                    <div class="quantity-controls">
                        <button class="quantity-btn decrease" data-id="${item.id}">-</button>
                        <span>${item.quantity}</span>
                        <button class="quantity-btn increase" data-id="${item.id}">+</button>
                        <button class="quantity-btn remove" data-id="${item.id}">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
                cartItems.appendChild(cartItem);
            });
            
            cartTotal.textContent = total.toFixed(2);
            
            // Add event listeners to quantity controls
            document.querySelectorAll('.decrease').forEach(button => {
                button.addEventListener('click', (e) => {
                    const id = parseInt(e.currentTarget.getAttribute('data-id'));
                    decreaseQuantity(id);
                });
            });
            
            document.querySelectorAll('.increase').forEach(button => {
                button.addEventListener('click', (e) => {
                    const id = parseInt(e.currentTarget.getAttribute('data-id'));
                    increaseQuantity(id);
                });
            });
            
            document.querySelectorAll('.remove').forEach(button => {
                button.addEventListener('click', (e) => {
                    const id = parseInt(e.currentTarget.getAttribute('data-id'));
                    removeFromCart(id);
                });
            });
        }

        // Decrease item quantity
        function decreaseQuantity(id) {
            const item = cart.find(item => item.id === id);
            if (item.quantity > 1) {
                item.quantity -= 1;
            } else {
                removeFromCart(id);
                return;
            }
            updateCartUI();
        }

        // Increase item quantity
        function increaseQuantity(id) {
            const item = cart.find(item => item.id === id);
            item.quantity += 1;
            updateCartUI();
        }

        // Remove item from cart
        function removeFromCart(id) {
            cart = cart.filter(item => item.id !== id);
            updateCartUI();
            showToast('Item removed from cart');
        }

        // Setup event listeners
        function setupEventListeners() {
            // Toggle between login and register forms
            toggleFormLink.addEventListener('click', (e) => {
                e.preventDefault();
                isLoginForm = !isLoginForm;
                
                if (isLoginForm) {
                    loginForm.style.display = 'block';
                    registerForm.style.display = 'none';
                    toggleFormLink.textContent = "Don't have an account? Register here";
                } else {
                    loginForm.style.display = 'none';
                    registerForm.style.display = 'block';
                    toggleFormLink.textContent = "Already have an account? Login here";
                }
            });

            // User type selection
            userTypes.forEach(type => {
                type.addEventListener('click', () => {
                    userTypes.forEach(t => t.classList.remove('active'));
                    type.classList.add('active');
                });
            });

            // Login form submission
            loginForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const email = document.getElementById('email').value;
                const password = document.getElementById('password').value;
                const activeType = document.querySelector('.user-type.active').getAttribute('data-type');
                
                // Find user
                const user = users.find(u => u.email === email && u.password === password && u.type === activeType);
                
                if (user) {
                    currentUser = user.name;
                    userType = user.type;
                    
                    // Switch to main app
                    loginPage.style.display = 'none';
                    app.style.display = 'block';
                    
                    // Update UI based on user type
                    userWelcome.textContent = `Welcome, ${currentUser}!`;
                    
                    // Show appropriate dashboard and control public sections visibility
                    if (userType === 'customer') {
                        customerDashboard.style.display = 'block';
                        staffDashboard.style.display = 'none';
                        adminDashboard.style.display = 'none';
                        // Reveal public site sections for customers
                        publicSections.forEach(s => s && (s.style.display = 'block'));
                        if (orderNowBtn) orderNowBtn.style.display = 'inline-block';
                        if (headerNav) headerNav.style.display = 'block';
                        renderCustomerOrders();
                    } else if (userType === 'staff') {
                        customerDashboard.style.display = 'none';
                        staffDashboard.style.display = 'block';
                        adminDashboard.style.display = 'none';
                        // Hide public product/story sections for staff users so they only see the staff board
                        publicSections.forEach(s => s && (s.style.display = 'none'));
                        if (orderNowBtn) orderNowBtn.style.display = 'none';
                        if (headerNav) headerNav.style.display = 'none';
                        renderStaffOrders();
                    } else if (userType === 'admin') {
                        customerDashboard.style.display = 'none';
                        staffDashboard.style.display = 'none';
                        adminDashboard.style.display = 'block';
                        // Admins should NOT see products/about - hide public sections for admin as well
                        publicSections.forEach(s => s && (s.style.display = 'none'));
                        if (orderNowBtn) orderNowBtn.style.display = 'none';
                        if (headerNav) headerNav.style.display = 'none';
                        // Hide cart and cart button for admin users
                        if (viewCartBtn) viewCartBtn.style.display = 'none';
                        if (cartSection) cartSection.style.display = 'none';
                        renderAdminMenu();
                        renderUserList();
                    }
                    
                    showToast(`Logged in as ${currentUser} (${userType})`);
                } else {
                    showToast('Invalid credentials or user type mismatch');
                }
            });

            // Register form submission
            registerForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const name = document.getElementById('regName').value;
                const email = document.getElementById('regEmail').value;
                const password = document.getElementById('regPassword').value;
                const confirmPassword = document.getElementById('regConfirmPassword').value;
                const type = document.getElementById('regType').value;
                
                if (password !== confirmPassword) {
                    showToast('Passwords do not match');
                    return;
                }
                
                // Check if user already exists
                if (users.find(u => u.email === email)) {
                    showToast('User with this email already exists');
                    return;
                }
                
                // Create new user
                const newUser = {
                    id: users.length + 1,
                    name: name,
                    email: email,
                    password: password,
                    type: type
                };
                
                users.push(newUser);
                
                // Switch to login form
                isLoginForm = true;
                loginForm.style.display = 'block';
                registerForm.style.display = 'none';
                toggleFormLink.textContent = "Don't have an account? Register here";
                
                showToast('Registration successful! Please login.');
            });

            // View cart button
            viewCartBtn.addEventListener('click', () => {
                menuSection.style.display = 'none';
                cartSection.style.display = 'block';
                customerDashboard.style.display = 'none';
                staffDashboard.style.display = 'none';
                adminDashboard.style.display = 'none';
            });

            // Checkout button - open checkout modal to collect payment/shipping info
            checkoutBtn.addEventListener('click', () => {
                if (cart.length === 0) {
                    showToast('Your cart is empty!');
                    return;
                }

                // Pre-fill form where possible
                if (currentUser) {
                    checkoutFullName.value = currentUser;
                } else {
                    checkoutFullName.value = '';
                }
                checkoutAddress.value = '';
                checkoutZip.value = '';
                gcashNumber.value = '';
                cardNumber.value = '';
                cardExpiry.value = '';
                cardCvv.value = '';

                // Compute totals
                const baseTotal = parseFloat(cartTotal.textContent) || 0;
                const SHIPPING_FEE = 50.00; // fixed shipping fee
                shippingFeeEl.textContent = SHIPPING_FEE.toFixed(2);
                orderTotalWithShippingEl.textContent = (baseTotal + SHIPPING_FEE).toFixed(2);

                // Show appropriate payment fields
                const pm = document.querySelector('input[name="paymentMethod"]:checked');
                if (pm && pm.value === 'credit') {
                    creditFields.style.display = 'block';
                    gcashFields.style.display = 'none';
                } else if (pm && pm.value === 'gcash') {
                    creditFields.style.display = 'none';
                    gcashFields.style.display = 'block';
                } else {
                    creditFields.style.display = 'none';
                    gcashFields.style.display = 'none';
                }

                checkoutModal.style.display = 'flex';
            });

            // Payment method change toggles fields
            document.querySelectorAll('input[name="paymentMethod"]').forEach(r => {
                r.addEventListener('change', () => {
                    const v = document.querySelector('input[name="paymentMethod"]:checked').value;
                    if (v === 'credit') {
                        creditFields.style.display = 'block';
                        gcashFields.style.display = 'none';
                    } else if (v === 'gcash') {
                        creditFields.style.display = 'none';
                        gcashFields.style.display = 'block';
                    } else {
                        creditFields.style.display = 'none';
                        gcashFields.style.display = 'none';
                    }
                });
            });

            // Close / cancel handlers for checkout modal
            if (closeCheckoutModal) closeCheckoutModal.addEventListener('click', () => checkoutModal.style.display = 'none');
            if (cancelCheckout) cancelCheckout.addEventListener('click', () => checkoutModal.style.display = 'none');

            // Submit checkout form
            checkoutForm.addEventListener('submit', (e) => {
                e.preventDefault();

                // Basic validation
                const fullName = checkoutFullName.value.trim();
                const address = checkoutAddress.value.trim();
                const zip = checkoutZip.value.trim();
                const paymentMethod = document.querySelector('input[name="paymentMethod"]:checked').value;

                if (!fullName || !address || !zip) {
                    showToast('Please fill full name, address and ZIP code');
                    return;
                }

                let paymentDetails = '';
                if (paymentMethod === 'gcash') {
                    paymentDetails = gcashNumber.value.trim();
                    if (!paymentDetails) { showToast('Please enter GCash number/reference'); return; }
                } else if (paymentMethod === 'credit') {
                    const num = cardNumber.value.replace(/\s+/g, '');
                    const exp = cardExpiry.value.trim();
                    const cvv = cardCvv.value.trim();
                    if (!num || !exp || !cvv) { showToast('Please enter credit card details'); return; }
                    // Do not store full card number in plain text — store masked
                    paymentDetails = '**** **** **** ' + num.slice(-4);
                } else {
                    paymentDetails = 'Cash on Delivery';
                }

                const baseTotal = parseFloat(cartTotal.textContent) || 0;
                const SHIPPING_FEE = parseFloat(shippingFeeEl.textContent) || 0;
                const finalTotal = parseFloat((baseTotal + SHIPPING_FEE).toFixed(2));

                const newOrder = {
                    id: orders.length + 1001,
                    customer: currentUser || fullName,
                    items: cart.map(i => i.name),
                    total: finalTotal,
                    shippingFee: SHIPPING_FEE,
                    paymentMethod: paymentMethod,
                    paymentDetails: paymentDetails,
                    address: address,
                    zip: zip,
                    fullname: fullName,
                    status: 'pending',
                    date: new Date().toISOString().split('T')[0]
                };

                orders.push(newOrder);
                saveOrdersToStorage();

                cart = [];
                updateCartUI();
                checkoutModal.style.display = 'none';

                showToast('Order placed successfully!');
                if (userType === 'customer') renderCustomerOrders();
            });

            // Logout button
            logoutBtn.addEventListener('click', () => {
                currentUser = null;
                userType = null;
                cart = [];
                
                app.style.display = 'none';
                loginPage.style.display = 'flex';
                
                // Reset forms
                loginForm.reset();
                registerForm.reset();
                isLoginForm = true;
                loginForm.style.display = 'block';
                registerForm.style.display = 'none';
                toggleFormLink.textContent = "Don't have an account? Register here";
                
                showToast('Logged out successfully');
                // Restore public site sections when logging out
                publicSections.forEach(s => s && (s.style.display = 'block'));
                if (orderNowBtn) orderNowBtn.style.display = 'inline-block';
                if (headerNav) headerNav.style.display = 'block';
                // Restore cart button for non-logged-in state
                if (viewCartBtn) viewCartBtn.style.display = 'inline-block';
            });

            // Menu filters
            filterBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    filterBtns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    renderMenu(btn.getAttribute('data-filter'));
                });
            });

            // Customer dashboard nav (Order History / Track Order / Profile)
            document.querySelectorAll('#customerDashboard .dashboard-nav a').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const href = link.getAttribute('href');
                    // hide all customer dashboard panels
                    document.getElementById('customerOrders').style.display = 'none';
                    const trackPanel = document.getElementById('trackOrder');
                    if (trackPanel) trackPanel.style.display = 'none';

                    // set active class
                    document.querySelectorAll('#customerDashboard .dashboard-nav a').forEach(a => a.classList.remove('active'));
                    link.classList.add('active');

                    if (href === '#orderHistory') {
                        document.getElementById('customerOrders').style.display = 'block';
                    } else if (href === '#trackOrder') {
                        if (trackPanel) trackPanel.style.display = 'block';
                    } else if (href === '#profile') {
                        // simple placeholder: show order history for now
                        document.getElementById('customerOrders').style.display = 'block';
                    }
                });
            });

            // Track order button handler
            const trackOrderBtn = document.getElementById('trackOrderBtn');
            if (trackOrderBtn) {
                trackOrderBtn.addEventListener('click', () => {
                    const val = document.getElementById('trackOrderInput').value.trim();
                    if (!val) { showToast('Please enter an order number'); return; }
                    const id = parseInt(val.replace(/[^0-9]/g, ''));
                    if (isNaN(id)) { showToast('Invalid order number'); return; }
                    showOrderTracking(id);
                });
            }

            // Add menu item button
            addMenuItemBtn.addEventListener('click', () => {
                const newId = cakes.length + 1;
                const newCake = {
                    id: newId,
                    name: `New Cake ${newId}`,
                    category: "special",
                    price: 30.00,
                    image: "https://images.unsplash.com/photo-1578985545062-69928b1d9587?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1089&q=80",
                    description: "Delicious new cake"
                };
                
                cakes.push(newCake);
                renderAdminMenu();
                showToast('New menu item added');
            });

            // Upload image button
            uploadImageBtn.addEventListener('click', () => {
                const url = imageUrl.value.trim();
                if (url) {
                    productImages.push(url);
                    renderImagePreview();
                    imageUrl.value = '';
                    showToast('Image added successfully');
                }
            });

            // Navigation links
            document.querySelectorAll('nav a').forEach(link => {
                link.addEventListener('click', (e) => {
                    if (link.getAttribute('href') === '#menu') {
                        menuSection.style.display = 'block';
                        cartSection.style.display = 'none';
                        customerDashboard.style.display = 'none';
                        staffDashboard.style.display = 'none';
                        adminDashboard.style.display = 'none';
                    } else if (link.getAttribute('href') === '#home') {
                        menuSection.style.display = 'block';
                        cartSection.style.display = 'none';
                        customerDashboard.style.display = 'none';
                        staffDashboard.style.display = 'none';
                        adminDashboard.style.display = 'none';
                    }
                });
            });
        }

        // Render customer orders
        function renderCustomerOrders() {
            customerOrders.innerHTML = '';
            
            const customerOrdersList = orders.filter(order => 
                order.customer === currentUser
            );
            
            if (customerOrdersList.length === 0) {
                customerOrders.innerHTML = '<p>You have no orders yet.</p>';
                return;
            }
            
            customerOrdersList.forEach(order => {
                const orderItem = document.createElement('div');
                orderItem.className = 'order-item';
                orderItem.innerHTML = `
                    <div>
                        <h4>Order #${order.id}</h4>
                        <p>${order.items.join(', ')}</p>
                        <p>Date: ${order.date}</p>
                    </div>
                    <div>
                        <p class="status-${order.status}">${order.status.charAt(0).toUpperCase() + order.status.slice(1)}</p>
                        <p><strong>₱${order.total.toFixed(2)}</strong></p>
                    </div>
                `;
                customerOrders.appendChild(orderItem);
            });
        }

        // Render staff orders
        function renderStaffOrders() {
            staffOrders.innerHTML = '';
            
            orders.forEach(order => {
                const orderItem = document.createElement('div');
                orderItem.className = 'order-item';
                orderItem.innerHTML = `
                    <div>
                        <h4>Order #${order.id} - ${order.customer}</h4>
                        <p>${order.items.join(', ')}</p>
                        <p>Date: ${order.date}</p>
                    </div>
                    <div>
                        <select class="status-select" data-id="${order.id}">
                            <option value="pending" ${order.status === 'pending' ? 'selected' : ''}>Pending</option>
                            <option value="preparing" ${order.status === 'preparing' ? 'selected' : ''}>Preparing</option>
                            <option value="ready" ${order.status === 'ready' ? 'selected' : ''}>Ready</option>
                            <option value="completed" ${order.status === 'completed' ? 'selected' : ''}>Completed</option>
                        </select>
                        <p><strong>₱${order.total.toFixed(2)}</strong></p>
                    </div>
                `;
                staffOrders.appendChild(orderItem);
            });
            
            // Add event listeners to status selects
            document.querySelectorAll('.status-select').forEach(select => {
                select.addEventListener('change', (e) => {
                    const orderId = parseInt(e.target.getAttribute('data-id'));
                    const newStatus = e.target.value;

                    const order = orders.find(o => o.id === orderId);
                    if (!order) return;

                    order.status = newStatus;

                    // Persist change so customer order history sees it (localStorage)
                    saveOrdersToStorage();

                    showToast(`Order #${orderId} status updated to ${newStatus}`);

                    // Re-render staff orders to reflect any UI changes
                    renderStaffOrders();

                    // If the affected customer is currently logged in, re-render their order history
                    if (userType === 'customer' && currentUser === order.customer) {
                        renderCustomerOrders();
                    }
                });
            });
        }

        // Show tracking info for an order (customer-facing)
        function showOrderTracking(orderId) {
            const order = orders.find(o => o.id === orderId);
            const trackResult = document.getElementById('trackResult');
            if (!trackResult) return;
            trackResult.innerHTML = '';

            if (!order) {
                trackResult.innerHTML = '<p>Order not found.</p>';
                return;
            }

            if (order.customer !== currentUser) {
                trackResult.innerHTML = '<p>You can only track orders placed under your account.</p>';
                return;
            }

            // Build a simple status timeline
            const statuses = ['pending', 'preparing', 'ready', 'completed'];
            const statusIndex = statuses.indexOf(order.status);

            let html = `
                <div style="border:1px solid #eee; padding:12px; border-radius:6px; max-width:640px;">
                    <h4>Order #${order.id}</h4>
                    <p><strong>Items:</strong> ${order.items.join(', ')}</p>
                    <p><strong>Placed:</strong> ${order.date}</p>
                    <p><strong>Delivery Address:</strong> ${order.address || 'N/A'}</p>
                    <p><strong>Total:</strong> ₱${order.total.toFixed(2)}</p>
                    <div style="margin-top:12px;">
                        <div style="display:flex; gap:10px; align-items:center;">
            `;

            statuses.forEach((s, i) => {
                const done = i <= statusIndex;
                html += `<div style="display:flex; flex-direction:column; align-items:center; text-align:center;">
                            <div style="width:18px; height:18px; border-radius:50%; background:${done ? 'var(--primary)' : '#ddd'}; margin-bottom:6px;"></div>
                            <small style="color:${done ? 'var(--primary)' : '#999'}">${s.charAt(0).toUpperCase()+s.slice(1)}</small>
                         </div>`;
                if (i < statuses.length -1) html += `<div style="flex:1; height:2px; background:${i < statusIndex ? 'var(--primary)' : '#eee'};"></div>`;
            });

            html += `</div></div>`;

            trackResult.innerHTML = html;
            // scroll into view
            trackResult.scrollIntoView({behavior: 'smooth'});
        }

        // Render admin menu
        function renderAdminMenu() {
            adminMenu.innerHTML = '';
            
            cakes.forEach(cake => {
                const menuItem = document.createElement('div');
                menuItem.className = 'menu-item-admin';
                menuItem.innerHTML = `
                    <div>
                        <h4>${cake.name}</h4>
                        <p>${cake.description}</p>
                        <p>Category: ${cake.category} | Price: ₱${cake.price.toFixed(2)}</p>
                    </div>
                    <div>
                        <button class="btn btn-primary edit-item" data-id="${cake.id}">Edit</button>
                        <button class="btn btn-secondary delete-item" data-id="${cake.id}">Delete</button>
                    </div>
                `;
                adminMenu.appendChild(menuItem);
            });
            
            // Add event listeners to edit and delete buttons
            document.querySelectorAll('.edit-item').forEach(button => {
                button.addEventListener('click', (e) => {
                    const cakeId = parseInt(e.currentTarget.getAttribute('data-id'));
                    showToast(`Editing cake #${cakeId}`);
                });
            });
            
            document.querySelectorAll('.delete-item').forEach(button => {
                button.addEventListener('click', (e) => {
                    const cakeId = parseInt(e.currentTarget.getAttribute('data-id'));
                    const index = cakes.findIndex(cake => cake.id === cakeId);
                    
                    if (index !== -1) {
                        cakes.splice(index, 1);
                        renderAdminMenu();
                        showToast('Menu item deleted');
                    }
                });
            });
        }

        // Render user list for admin
        function renderUserList() {
            userList.innerHTML = '';
            
            users.forEach(user => {
                const userItem = document.createElement('div');
                userItem.className = 'user-item';
                userItem.innerHTML = `
                    <div>
                        <h4>${user.name}</h4>
                        <p>${user.email} (${user.type})</p>
                    </div>
                    <div>
                        <select class="user-role-select" data-id="${user.id}">
                            <option value="customer" ${user.type === 'customer' ? 'selected' : ''}>Customer</option>
                            <option value="staff" ${user.type === 'staff' ? 'selected' : ''}>Staff</option>
                            <option value="admin" ${user.type === 'admin' ? 'selected' : ''}>Admin</option>
                        </select>
                        <button class="btn btn-secondary delete-user" data-id="${user.id}">Delete</button>
                    </div>
                `;
                userList.appendChild(userItem);
            });
            
            // Add event listeners to role selects
            document.querySelectorAll('.user-role-select').forEach(select => {
                select.addEventListener('change', (e) => {
                    const userId = parseInt(e.target.getAttribute('data-id'));
                    const newRole = e.target.value;

                    const user = users.find(u => u.id === userId);
                    if (!user) return;

                    user.type = newRole;
                    showToast(`User ${user.name} role updated to ${newRole}`);
                });
            });
            
            // Add event listeners to delete buttons
            document.querySelectorAll('.delete-user').forEach(button => {
                button.addEventListener('click', (e) => {
                    const userId = parseInt(e.currentTarget.getAttribute('data-id'));
                    const index = users.findIndex(user => user.id === userId);
                    
                    if (index !== -1) {
                        users.splice(index, 1);
                        renderUserList();
                        showToast('User deleted');
                    }
                });
            });
        }

        // Render image preview
        function renderImagePreview() {
            imagePreview.innerHTML = '';
            
            productImages.forEach((image, index) => {
                const previewItem = document.createElement('div');
                previewItem.className = 'preview-item';
                previewItem.innerHTML = `
                    <img src="${image}" alt="Product image ${index + 1}">
                    <button class="remove-btn" data-index="${index}">
                        <i class="fas fa-times"></i>
                    </button>
                `;
                imagePreview.appendChild(previewItem);
                
                // Set first image as about image
                if (index === 0) {
                    aboutImage.src = image;
                }
            });
            
            // Add event listeners to remove buttons
            document.querySelectorAll('.preview-item .remove-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const index = parseInt(e.currentTarget.getAttribute('data-index'));
                    productImages.splice(index, 1);
                    renderImagePreview();
                    showToast('Image removed');
                });
            });
            
            // Add event listeners to preview images
            document.querySelectorAll('.preview-item img').forEach((img, index) => {
                img.addEventListener('click', () => {
                    aboutImage.src = img.src;
                    showToast('About image updated');
                });
            });
        }

        // Show toast notification
        function showToast(message) {
            // Remove existing toasts
            const existingToasts = document.querySelectorAll('.toast');
            existingToasts.forEach(toast => toast.remove());
            
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = message;
            document.body.appendChild(toast);
            
            // Remove toast after animation
            setTimeout(() => {
                if (toast.parentNode) {
                    toast.parentNode.removeChild(toast);
                }
            }, 3000);
        }

        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
